<html>
<head>
  <title>5 装饰者模式</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600646 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="3392"/>
<h1>5 装饰者模式</h1>

<div>
<span><div>装饰者模式：动态地讲责任附加到对象上。若要扩展功能，装饰者提供了比继承更有弹性的解决方案。</div><div><img src="5 装饰者模式_files/Image.png" type="image/png" data-filename="Image.png" width="970"/></div><div>装饰者继承超类是为了有正确的类型，而不是继承行为</div><div><br/></div><div><img src="5 装饰者模式_files/Image [1].png" type="image/png" data-filename="Image.png" width="901"/></div><div><img src="5 装饰者模式_files/Image [2].png" type="image/png" data-filename="Image.png"/></div><div><img src="5 装饰者模式_files/Image [3].png" type="image/png" data-filename="Image.png"/> <img src="5 装饰者模式_files/Image [4].png" type="image/png" data-filename="Image.png"/></div><div style="background-color: rgb(39, 40, 34); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(249, 38, 114); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">public</span> <span style="font-size: 14px; color: rgb(249, 38, 114); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">abstract</span> <span style="font-size: 14px; color: rgb(249, 38, 114); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">class</span> <span style="font-size: 14px; color: rgb(166, 226, 46); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px; text-decoration: underline;">Beverage</span> <span style="font-size: 14px; color: rgb(248, 248, 242); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">{</span></div><div style="background-color: rgb(39, 40, 34); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(117, 113, 94); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">    // 超类</span></div><div style="background-color: rgb(39, 40, 34); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(102, 217, 239); font-family: Consolas, &quot;Courier New&quot;, monospace; font-style: italic; line-height: 19px;">    String</span> <span style="font-size: 14px; color: rgb(248, 248, 242); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">dsc</span> <span style="font-size: 14px; color: rgb(249, 38, 114); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">=</span> <span style="font-size: 14px; color: rgb(230, 219, 116); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">&quot;&quot;</span><span style="font-size: 14px; color: rgb(248, 248, 242); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">;</span></div><div style="background-color: rgb(39, 40, 34); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(249, 38, 114); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">    public</span> <span style="font-size: 14px; color: rgb(102, 217, 239); font-family: Consolas, &quot;Courier New&quot;, monospace; font-style: italic; line-height: 19px;">String</span> <span style="font-size: 14px; color: rgb(166, 226, 46); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">getDsc</span><span style="font-size: 14px; color: rgb(248, 248, 242); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">() {</span></div><div style="background-color: rgb(39, 40, 34); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(249, 38, 114); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">        return</span> <span style="font-size: 14px; color: rgb(248, 248, 242); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">dsc;</span></div><div style="background-color: rgb(39, 40, 34); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(248, 248, 242); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">    }</span></div><div style="background-color: rgb(39, 40, 34); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(249, 38, 114); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">    public</span> <span style="font-size: 14px; color: rgb(249, 38, 114); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">abstract</span> <span style="font-size: 14px; color: rgb(102, 217, 239); font-family: Consolas, &quot;Courier New&quot;, monospace; font-style: italic; line-height: 19px;">double</span> <span style="font-size: 14px; color: rgb(166, 226, 46); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">cost</span><span style="font-size: 14px; color: rgb(248, 248, 242); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">();</span></div><div style="background-color: rgb(39, 40, 34); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(248, 248, 242); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">}</span></div><div style="background-color: rgb(39, 40, 34); font-size: 14px; white-space: pre;"><br/></div><div style="background-color: rgb(39, 40, 34); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(249, 38, 114); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">public</span> <span style="font-size: 14px; color: rgb(249, 38, 114); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">abstract</span> <span style="font-size: 14px; color: rgb(249, 38, 114); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">class</span> <span style="font-size: 14px; color: rgb(166, 226, 46); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px; text-decoration: underline;">CondimentDecorator</span> <span style="font-size: 14px; color: rgb(249, 38, 114); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">extends</span> <span style="font-size: 14px; color: rgb(166, 226, 46); font-family: Consolas, &quot;Courier New&quot;, monospace; font-style: italic; line-height: 19px; text-decoration: underline;">Beverage</span> <span style="font-size: 14px; color: rgb(248, 248, 242); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">{</span></div><div style="background-color: rgb(39, 40, 34); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(117, 113, 94); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">    // 装饰器抽象类</span></div><div style="background-color: rgb(39, 40, 34); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(249, 38, 114); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">    public</span> <span style="font-size: 14px; color: rgb(249, 38, 114); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">abstract</span> <span style="font-size: 14px; color: rgb(102, 217, 239); font-family: Consolas, &quot;Courier New&quot;, monospace; font-style: italic; line-height: 19px;">String</span> <span style="font-size: 14px; color: rgb(166, 226, 46); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">getDsc</span><span style="font-size: 14px; color: rgb(248, 248, 242); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">();</span></div><div style="background-color: rgb(39, 40, 34); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(248, 248, 242); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">}</span></div><div style="background-color: rgb(39, 40, 34); font-size: 14px; white-space: pre;"><br/></div><div style="background-color: rgb(39, 40, 34); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(249, 38, 114); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">public</span> <span style="font-size: 14px; color: rgb(249, 38, 114); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">class</span> <span style="font-size: 14px; color: rgb(166, 226, 46); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px; text-decoration: underline;">SomeBeverage</span> <span style="font-size: 14px; color: rgb(249, 38, 114); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">extends</span> <span style="font-size: 14px; color: rgb(166, 226, 46); font-family: Consolas, &quot;Courier New&quot;, monospace; font-style: italic; line-height: 19px; text-decoration: underline;">Beverage</span> <span style="font-size: 14px; color: rgb(248, 248, 242); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">{</span></div><div style="background-color: rgb(39, 40, 34); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(117, 113, 94); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">    // 具体类</span></div><div style="background-color: rgb(39, 40, 34); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(249, 38, 114); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">    public</span> <span style="font-size: 14px; color: rgb(166, 226, 46); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">SomeBeverage</span><span style="font-size: 14px; color: rgb(248, 248, 242); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">() {</span></div><div style="background-color: rgb(39, 40, 34); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(248, 248, 242); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">        dsc</span> <span style="font-size: 14px; color: rgb(249, 38, 114); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">=</span> <span style="font-size: 14px; color: rgb(230, 219, 116); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">&quot;...&quot;</span><span style="font-size: 14px; color: rgb(248, 248, 242); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">;</span></div><div style="background-color: rgb(39, 40, 34); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(248, 248, 242); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">    }</span></div><div style="background-color: rgb(39, 40, 34); font-size: 14px; white-space: pre;"><br/></div><div style="background-color: rgb(39, 40, 34); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(249, 38, 114); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">    public</span> <span style="font-size: 14px; color: rgb(102, 217, 239); font-family: Consolas, &quot;Courier New&quot;, monospace; font-style: italic; line-height: 19px;">double</span> <span style="font-size: 14px; color: rgb(166, 226, 46); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">cost</span><span style="font-size: 14px; color: rgb(248, 248, 242); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">() {</span></div><div style="background-color: rgb(39, 40, 34); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(249, 38, 114); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">        return</span> <span style="font-size: 14px; color: rgb(174, 129, 255); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">1.99</span><span style="font-size: 14px; color: rgb(248, 248, 242); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">;</span></div><div style="background-color: rgb(39, 40, 34); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(248, 248, 242); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">    }</span></div><div style="background-color: rgb(39, 40, 34); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(248, 248, 242); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">}</span></div><div style="background-color: rgb(39, 40, 34); font-size: 14px; white-space: pre;"><br/></div><div style="background-color: rgb(39, 40, 34); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(249, 38, 114); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">public</span> <span style="font-size: 14px; color: rgb(249, 38, 114); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">class</span> <span style="font-size: 14px; color: rgb(166, 226, 46); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px; text-decoration: underline;">Mocha</span> <span style="font-size: 14px; color: rgb(249, 38, 114); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">extends</span> <span style="font-size: 14px; color: rgb(166, 226, 46); font-family: Consolas, &quot;Courier New&quot;, monospace; font-style: italic; line-height: 19px; text-decoration: underline;">CondimentDecorator</span> <span style="font-size: 14px; color: rgb(248, 248, 242); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">{</span></div><div style="background-color: rgb(39, 40, 34); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(117, 113, 94); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">    // 具体装饰器</span></div><div style="background-color: rgb(39, 40, 34); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(102, 217, 239); font-family: Consolas, &quot;Courier New&quot;, monospace; font-style: italic; line-height: 19px;">    Beverage</span> <span style="font-size: 14px; color: rgb(248, 248, 242); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">beverage</span><span style="font-size: 14px; color: rgb(248, 248, 242); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">;</span></div><div style="background-color: rgb(39, 40, 34); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(249, 38, 114); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">    public</span> <span style="font-size: 14px; color: rgb(166, 226, 46); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">Mocha</span><span style="font-size: 14px; color: rgb(248, 248, 242); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">(</span><span style="font-size: 14px; color: rgb(102, 217, 239); font-family: Consolas, &quot;Courier New&quot;, monospace; font-style: italic; line-height: 19px;">Beverage</span> <span style="font-size: 14px; color: rgb(253, 151, 31); font-family: Consolas, &quot;Courier New&quot;, monospace; font-style: italic; line-height: 19px;">beverage</span><span style="font-size: 14px; color: rgb(248, 248, 242); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">) {</span></div><div style="background-color: rgb(39, 40, 34); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(117, 113, 94); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">        // 传入被装饰类</span></div><div style="background-color: rgb(39, 40, 34); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(253, 151, 31); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">        this</span><span style="font-size: 14px; color: rgb(248, 248, 242); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">.</span><span style="font-size: 14px; color: rgb(248, 248, 242); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">beverage</span> <span style="font-size: 14px; color: rgb(249, 38, 114); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">=</span> <span style="font-size: 14px; color: rgb(248, 248, 242); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">beverage;</span></div><div style="background-color: rgb(39, 40, 34); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(248, 248, 242); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">    }</span></div><div style="background-color: rgb(39, 40, 34); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(249, 38, 114); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">    public</span> <span style="font-size: 14px; color: rgb(102, 217, 239); font-family: Consolas, &quot;Courier New&quot;, monospace; font-style: italic; line-height: 19px;">String</span> <span style="font-size: 14px; color: rgb(166, 226, 46); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">getDsc</span><span style="font-size: 14px; color: rgb(248, 248, 242); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">() {</span></div><div style="background-color: rgb(39, 40, 34); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(249, 38, 114); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">        return</span> <span style="font-size: 14px; color: rgb(248, 248, 242); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">beverage</span><span style="font-size: 14px; color: rgb(248, 248, 242); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">.</span><span style="font-size: 14px; color: rgb(166, 226, 46); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">getDsc</span><span style="font-size: 14px; color: rgb(248, 248, 242); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">()</span> <span style="font-size: 14px; color: rgb(249, 38, 114); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">+</span> <span style="font-size: 14px; color: rgb(230, 219, 116); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">&quot;mocha&quot;</span><span style="font-size: 14px; color: rgb(248, 248, 242); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">;</span></div><div style="background-color: rgb(39, 40, 34); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(248, 248, 242); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">    }</span></div><div style="background-color: rgb(39, 40, 34); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(249, 38, 114); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">    public</span> <span style="font-size: 14px; color: rgb(102, 217, 239); font-family: Consolas, &quot;Courier New&quot;, monospace; font-style: italic; line-height: 19px;">double</span> <span style="font-size: 14px; color: rgb(166, 226, 46); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">cost</span><span style="font-size: 14px; color: rgb(248, 248, 242); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">() {</span></div><div style="background-color: rgb(39, 40, 34); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(249, 38, 114); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">        return</span> <span style="font-size: 14px; color: rgb(174, 129, 255); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">.20</span> <span style="font-size: 14px; color: rgb(249, 38, 114); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">+</span> <span style="font-size: 14px; color: rgb(248, 248, 242); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">beverage</span><span style="font-size: 14px; color: rgb(248, 248, 242); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">.</span><span style="font-size: 14px; color: rgb(166, 226, 46); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">cost</span><span style="font-size: 14px; color: rgb(248, 248, 242); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">();</span></div><div style="background-color: rgb(39, 40, 34); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(248, 248, 242); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">    }</span></div><div style="background-color: rgb(39, 40, 34); font-size: 14px; white-space: pre;"><span style="font-size: 14px; color: rgb(248, 248, 242); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 19px;">}</span></div></span>
</div></body></html> 