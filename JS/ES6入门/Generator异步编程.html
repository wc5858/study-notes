<html>
<head>
  <title>Generator异步编程</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/307881 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1746"/>
<h1>Generator异步编程</h1>

<div>
<span><div><div>传统异步编程</div><div>* 回调函数</div><div>* 事件监听</div><div>* 发布/订阅</div><div>* Promise 对象</div><div><br/></div><div>回调地狱=&gt;Promise将回调函数的嵌套，改成链式调用</div><div>Promise 的最大问题是代码冗余，原来的任务被 Promise 包装了一下，不管什么操作，一眼看去都是一堆then，原来的语义变得很不清楚。</div><div><br/></div><div><hr/></div><div>协程与Generator函数</div><div>传统的编程语言，早有异步编程的解决方案（其实是多任务的解决方案）。其中有一种叫做&quot;协程&quot;（coroutine），意思是多个线程互相协作，完成异步任务。</div><div>协程有点像函数，又有点像线程。它的运行流程大致如下。</div><div>* 第一步，协程A开始执行。</div><div>* 第二步，协程A执行到一半，进入暂停，执行权转移到协程B。</div><div>* 第三步，（一段时间后）协程B交还执行权。</div><div>* 第四步，协程A恢复执行。</div><div>上面流程的协程A，就是异步任务，因为它分成两段（或多段）执行。</div><div><br/></div><div>Generator 函数是协程在 ES6 的实现，最大特点就是可以交出函数的执行权（即暂停执行）。</div><div><br/></div><div>Generator 函数可以暂停执行和恢复执行，这是它能封装异步任务的根本原因。除此之外，它还有两个特性，使它可以作为异步编程的完整解决方案：函数体内外的数据交换和错误处理机制。</div><div><br/></div><div>实例:</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">var fetch = require('node-fetch');</span></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">function* gen(){</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">  var url = 'https://api.github.com/users/github';</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">  var result = yield fetch(url);</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">  console.log(result.bio);</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">}</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><br/></span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">var g = gen();var result = g.next();</span></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">result.value.then(function(data){</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">  return data.json();</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">})</span><span style="font-family: Monaco; font-size: 9pt;">.then(function(data){</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">  g.next(data);</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">});</span></div></div><div><br/></div><div>可以看到，虽然 Generator 函数将异步操作表示得很简洁，但是流程管理却不方便（即何时执行第一阶段、何时执行第二阶段）。</div><div>=============================</div><div><br/></div><div>Thunk 函数</div><div>自动执行 Generator 函数的一种方法。</div><div><br/></div><div>=&gt;求值策略：传值调用和传名调用（后者即传引用）</div><div>（js是传值调用）</div><div><br/></div><div>编译器的“传名调用”实现，往往是将参数放到一个临时函数之中，再将这个临时函数传入函数体。这个临时函数就叫做 Thunk 函数。</div><div><br/></div><div>在 JavaScript 语言中，Thunk 函数替换的不是表达式，而是多参数函数，将其替换成一个只接受回调函数作为参数的单参数函数。</div><div><img src="Generator异步编程_files/Image.png" type="image/png" data-filename="Image.png" width="532"/></div><div>注：类似柯里化函数，但是有区别</div><ul><li><div>柯里化是把接受多个参数的函数变换成接受一个单一参数（最初函数的第一个参数）的函数，并且返回接受余下的参数而且返回结果的新函数的技术</div></li><li><div>thunk是将函数变成只能接受一个回调函数的函数</div></li></ul><div>不够二者都是理由闭包对参数进行处理，封装新函数</div><div><br/></div><div>任何函数，只要参数有回调函数，就能写成 Thunk 函数的形式。</div><div>转换器：</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">// ES5版本</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">var Thunk = function(fn){</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">  return function (){</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    var args = Array.prototype.slice.call(arguments);</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    return function (callback){</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">      args.push(callback);</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">      return fn.apply(this, args);</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    }</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">  };</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">};</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">// ES6版本</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">const Thunk = function(fn) {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">  return function (...args) {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    return function (callback) {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">      return fn.call(this, ...args, callback);</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    }</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">  };</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">};</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">//用法</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">var readFileThunk = Thunk(fs.readFile);</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">readFileThunk(fileA)(callback);</span></div></div><div><br/></div><div>Thunk 函数现在可以用于 Generator 函数的自动流程管理</div><div>核心思路其实是yield命令将程序的执行权移出 Generator 函数，Thunk的回调函数中将执行权交还给 Generator 函数</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>//<span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">一个基于 Thunk 函数的 Generator 执行器。</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">function run(fn) {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">  var gen = fn();</span></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">  function next(err, data) {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    var result = gen.next(data);</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    if (result.done) return;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    </span><span style="font-family: Monaco; font-size: 9pt;"><font color="#FF0000">result.value(next); //这一句是核心，如果<span style="font-family: Monaco; font-size: 9pt; color: rgb(255, 0, 0);">Generator 函数没有结束，会将next作为Thunk的回调，这就在每一步异步操作上执行了这个回调</span></font></span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">  }</span></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">  next();</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">}</span></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">function* g() {</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">  // ...</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">}</span></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">run(g);</span></div></div><div><br/></div><div>Thunk 函数并不是 Generator 函数自动执行的唯一方案。因为自动执行的关键是，必须有一种机制，自动控制 Generator 函数的流程，接收和交还程序的执行权。回调函数可以做到这一点，Promise 对象也可以做到这一点。</div><div><br/></div><div>====================================</div><div><br/></div><div><a href="https://github.com/tj/co">co模块</a>，用于 Generator 函数的自动执行<span>    </span></div><div>co 模块其实就是将两种自动执行器（Thunk 函数和 Promise 对象），包装成一个模块。使用 co 的前提条件是，Generator 函数的yield命令后面，只能是 Thunk 函数或 Promise 对象。如果数组或对象的成员，全部都是 Promise 对象，也可以使用 co。</div><div><br/></div><div>====================================</div><div><br/></div><div>基于Promise的自动执行</div><div><br/></div><div>其实是在then方法中将执行权移交回Generator 函数</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">//自动执行器</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">function run(gen){</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">  var g = gen();</span></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">  function next(data){</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    var result = g.next(data);</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    if (result.done) return result.value;</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    result.value.then(function(data){</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">      next(data);</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    });</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">  }</span></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">  next();</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">}</span></div><div><br style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">run(gen);</span></div></div><div><br/></div><div>====================</div><div><br/></div><div>co 支持并发的异步操作，即允许某些操作同时进行，等到它们全部完成，才进行下一步。</div><div><img src="Generator异步编程_files/Image [1].png" type="image/png" data-filename="Image.png" width="478"/></div><div><hr/></div><div><span style="color: rgb(51, 51, 51); font-family: Verdana, Arial;">=====================</span></div><div><span style="color: rgb(51, 51, 51); font-family: Verdana, Arial;">实例：处理 Stream</span></div><div style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 15.36px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; margin-top: 1em; margin-bottom: 1em;"><span style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 15.36px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;-en-paragraph:true;">Node 提供 Stream 模式读写数据，特点是一次只处理数据的一部分，数据分成一块块依次处理，就好像“数据流”一样。这对于处理大规模数据非常有利。Stream 模式使用 EventEmitter API，会释放三个事件。</span></div><ul style="list-style-type: none; padding-top: 0.5rem; padding-bottom: 0.5rem; color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 15.36px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><li style="text-indent: -5px; font-size: 0.8rem;"><div><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px;">data</span>事件：下一块数据块已经准备好了。</div></li><li style="text-indent: -5px; font-size: 0.8rem;"><div><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px;">end</span>事件：整个“数据流”处理“完了。</div></li><li style="text-indent: -5px; font-size: 0.8rem;"><div><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; color: rgb(199, 37, 78); background: rgb(249, 242, 244); border-radius: 2px;">error</span>事件：发生错误。</div></li></ul><div style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 15.36px; color: rgb(51, 51, 51); font-family: Verdana, Arial; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;-en-paragraph:true;">使用</span><span style="font-size: 0.7rem; color: rgb(199, 37, 78); font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background: rgb(249, 242, 244); border-radius: 2px;-en-paragraph:true;">Promise.race()</span><span style="font-size: 15.36px; color: rgb(51, 51, 51); font-family: Verdana, Arial; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;-en-paragraph:true;">函数，可以判断这三个事件之中哪一个最先发生，只有当</span><span style="font-size: 0.7rem; color: rgb(199, 37, 78); font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background: rgb(249, 242, 244); border-radius: 2px;-en-paragraph:true;">data</span><span style="font-size: 15.36px; color: rgb(51, 51, 51); font-family: Verdana, Arial; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;-en-paragraph:true;">事件最先发生时，才进入下一个数据块的处理。从而，我们可以通过一个</span><font style="font-size: 10pt;"><span style="color: rgb(199, 37, 78); font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background: rgb(249, 242, 244); border-radius: 2px;-en-paragraph:true;">while</span><span style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;-en-paragraph:true;">循环，完成所有数据的读取。</span></font></div><div style="overflow: auto; font-family: Consolas, Monaco, &quot;Andale Mono&quot;, monospace; color: rgb(255, 255, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; text-align: left; white-space: pre; word-spacing: 0px; word-break: normal; tab-size: 4; hyphens: none; padding: 10px 1em 10px 0.7rem; margin: 0.5em auto; border-radius: 5px; background: rgb(17, 17, 17); line-height: 1.2; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; -webkit-text-stroke-width: 0px;"><div><font style="font-size: 10pt;"><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">const co</span> <span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(249, 38, 114); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">=</span> <span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">require</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">(</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">'co'</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">)</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">;</span></font></div><div><font style="font-size: 10pt;"><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">const fs</span> <span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(249, 38, 114); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">=</span> <span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">require</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">(</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">'fs'</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">)</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">;</span></font></div><div><font style="font-size: 10pt;"><br/></font></div><div><font style="font-size: 10pt;"><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">const stream</span> <span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(249, 38, 114); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">=</span> <span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">fs</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">.</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">createReadStream</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">(</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">'./les_miserables.txt'</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">)</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">;</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(102, 217, 239); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">let</span> <span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">valjeanCount</span> <span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(249, 38, 114); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">=</span> <span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(174, 129, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">0</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">;</span></font></div><div><font style="font-size: 10pt;"><br/></font></div><div><font style="font-size: 10pt;"><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">co</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">(</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(102, 217, 239); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">function</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(249, 38, 114); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">*</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">(</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">)</span> <span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">{</span></font></div><div><font style="font-size: 10pt;"><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(102, 217, 239); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">while</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">(</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(174, 129, 255); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">true</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">)</span> <span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">{</span></font></div><div><font style="font-size: 10pt;"><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">const res</span> <span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(249, 38, 114); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">=</span> <span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">yield Promise</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">.</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">race</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">(</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">[</span></font></div><div><font style="font-size: 10pt;"><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(102, 217, 239); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">new</span> <span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">Promise</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">(</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">resolve</span> <span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(249, 38, 114); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">=</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(249, 38, 114); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">&gt;</span> <span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">stream</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">.</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">once</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">(</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">'data'</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">,</span> <span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">resolve</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">)</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">)</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">,</span></font></div><div><font style="font-size: 10pt;"><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(102, 217, 239); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">new</span> <span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">Promise</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">(</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">resolve</span> <span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(249, 38, 114); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">=</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(249, 38, 114); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">&gt;</span> <span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">stream</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">.</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">once</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">(</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">'end'</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">,</span> <span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">resolve</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">)</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">)</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">,</span></font></div><div><font style="font-size: 10pt;"><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(102, 217, 239); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">new</span> <span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">Promise</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">(</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">(</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">resolve</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">,</span> <span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">reject</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">)</span> <span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(249, 38, 114); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">=</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(249, 38, 114); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">&gt;</span> <span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">stream</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">.</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">once</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">(</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">'error'</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">,</span> <span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">reject</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">)</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">)</span></font></div><div><font style="font-size: 10pt;"><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">]</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">)</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">;</span></font></div><div><font style="font-size: 10pt;"><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(102, 217, 239); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">if</span> <span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">(</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(249, 38, 114); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">!</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">res</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">)</span> <span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">{</span></font></div><div><font style="font-size: 10pt;"><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(102, 217, 239); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">break</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">;</span></font></div><div><font style="font-size: 10pt;"><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">}</span></font></div><div><font style="font-size: 10pt;"><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">stream</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">.</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">removeAllListeners</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">(</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">'data'</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">)</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">;</span></font></div><div><font style="font-size: 10pt;"><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">stream</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">.</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">removeAllListeners</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">(</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">'end'</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">)</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">;</span></font></div><div><font style="font-size: 10pt;"><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">stream</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">.</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">removeAllListeners</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">(</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">'error'</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">)</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">;</span></font></div><div><font style="font-size: 10pt;"><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">valjeanCount</span> <span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(249, 38, 114); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">+</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(249, 38, 114); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">=</span> <span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">(</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">res</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">.</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">toString</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">(</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">)</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">.</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">match</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">(</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(253, 151, 31); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">/valjean/ig</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">)</span> <span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(249, 38, 114); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">||</span> <span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">[</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">]</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">)</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">.</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">length</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">;</span></font></div><div><font style="font-size: 10pt;"><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">}</span></font></div><div><font style="font-size: 10pt;"><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">console</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">.</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">log</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">(</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">'count:'</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">,</span> <span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(166, 226, 46); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">valjeanCount</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">)</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">;</span> <span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(117, 113, 94); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">// count: 1120</span></font></div><div><font style="font-size: 10pt;"><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">}</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">)</span><span style="font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; color: rgb(248, 248, 242); text-shadow: rgba(0, 0, 0, 0.3) 0px 1px; direction: ltr; white-space: pre; word-spacing: normal; word-break: normal; tab-size: 4; hyphens: none; background: rgb(17, 17, 17); border-radius: 2px;">;</span></font></div></div><div><span style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 15.36px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;-en-paragraph:true;">上面代码采用 Stream 模式读取《悲惨世界》的文本文件，对于每个数据块都使用</span><span style="color: rgb(199, 37, 78); font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background: rgb(249, 242, 244); border-radius: 2px;-en-paragraph:true;">stream.once</span><span style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 15.36px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;-en-paragraph:true;">方法，在</span><span style="color: rgb(199, 37, 78); font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background: rgb(249, 242, 244); border-radius: 2px;-en-paragraph:true;">data</span><span style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 15.36px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;-en-paragraph:true;">、</span><span style="color: rgb(199, 37, 78); font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background: rgb(249, 242, 244); border-radius: 2px;-en-paragraph:true;">end</span><span style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 15.36px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;-en-paragraph:true;">、</span><span style="color: rgb(199, 37, 78); font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background: rgb(249, 242, 244); border-radius: 2px;-en-paragraph:true;">error</span><span style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 15.36px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;-en-paragraph:true;">三个事件上添加一次性回调函数。变量</span><span style="color: rgb(199, 37, 78); font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background: rgb(249, 242, 244); border-radius: 2px;-en-paragraph:true;">res</span><span style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 15.36px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;-en-paragraph:true;">只有在</span><span style="color: rgb(199, 37, 78); font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background: rgb(249, 242, 244); border-radius: 2px;-en-paragraph:true;">data</span><span style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 15.36px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;-en-paragraph:true;">事件发生时才有值，然后累加每个数据块之中</span><span style="color: rgb(199, 37, 78); font-family: Consolas, &quot;Courier New&quot;, Courier, FreeMono, monospace; font-size: 0.7rem; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background: rgb(249, 242, 244); border-radius: 2px;-en-paragraph:true;">valjean</span><span style="color: rgb(51, 51, 51); font-family: Verdana, Arial; font-size: 15.36px; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;-en-paragraph:true;">这个词出现的次数。</span></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div></div></span>
</div></body></html> 